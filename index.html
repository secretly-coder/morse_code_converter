<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Morse Code Converter</title>
<style>
    * { box-sizing: border-box; margin:0; padding:0; }
    body {
        font-family: 'Arial', sans-serif;
        display:flex;
        flex-direction:column;
        align-items:center;
        padding:20px;
        background: linear-gradient(135deg, #ece9e6, #ffffff);
        min-height:100vh;
    }
    h1 { text-align:center; margin-bottom:20px; font-size:26px; color:#333; }

    .selection-box, .converter-box {
        background:#fff;
        border-radius:12px;
        box-shadow:0 4px 15px rgba(0,0,0,0.1);
        padding:25px;
        width:100%;
        max-width:500px;
        text-align:center;
        transition:all 0.5s ease;
    }

    .selection-box button, .converter-box button {
        margin:10px 0;
        width:80%;
        padding:12px;
        font-size:16px;
        border:none;
        border-radius:10px;
        cursor:pointer;
        background: linear-gradient(135deg, #6a11cb, #2575fc);
        color:#fff;
        font-weight:bold;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .selection-box button:hover, .converter-box button:hover {
        transform: translateY(-3px);
        box-shadow:0 6px 12px rgba(0,0,0,0.2);
    }

    .back-btn {
        background: #ff6b6b;
        margin-top:15px;
    }

    textarea {
        width:100%;
        min-height:100px;
        margin:10px 0;
        padding:12px;
        border-radius:8px;
        border:1px solid #ccc;
        font-size:16px;
        resize:vertical;
    }

    #output {
        background:#f9f9f9;
        border:1px solid #ccc;
        border-radius:8px;
        padding:15px;
        min-height:80px;
        margin-top:10px;
        word-wrap: break-word;
        overflow-wrap: break-word;
        transition: all 0.3s;
    }

    /* Toast */
    #toast {
        visibility:hidden;
        min-width:120px;
        background-color:#333;
        color:#fff;
        text-align:center;
        border-radius:8px;
        padding:10px;
        position:fixed;
        top:20px;
        left:50%;
        transform:translateX(-50%);
        z-index:1000;
        font-weight:bold;
        opacity:0;
        transition:opacity 0.5s, top 0.5s;
    }
</style>
</head>
<body>

<h1>Morse Code Converter</h1>

<div class="selection-box" id="selectionBox">
    <h3>Select Conversion Type</h3>
    <button onclick="startConversion('textToMorse')">Text → Morse</button>
    <button onclick="startConversion('morseToText')">Morse → Text</button>
</div>

<div class="converter-box" id="converterBox" style="display:none; opacity:0;">
    <button class="back-btn" onclick="goBack()">← Back</button>
    <div id="inputGroup">
        <textarea id="inputField" placeholder=""></textarea>
    </div>
    <button onclick="copyOutput()">Copy Output</button>
    <div id="output">Your converted result will appear here...</div>
</div>

<!-- Toast -->
<div id="toast">Copied!</div>

<script>
const morseCodeMap = {
    'A':'.-','B':'-...','C':'-.-.','D':'-..','E':'.','F':'..-.','G':'--.',
    'H':'....','I':'..','J':'.---','K':'-.-','L':'.-..','M':'--','N':'-.',
    'O':'---','P':'.--.','Q':'--.-','R':'.-.','S':'...','T':'-','U':'..-',
    'V':'...-','W':'.--','X':'-..-','Y':'-.--','Z':'--..',
    '0':'-----','1':'.----','2':'..---','3':'...--','4':'....-','5':'.....',
    '6':'-....','7':'--...','8':'---..','9':'----.',' ':'/'
};

const reverseMorseMap = {};
for(let k in morseCodeMap) reverseMorseMap[morseCodeMap[k]] = k;

let conversionType = '';

function startConversion(type){
    conversionType = type;
    document.getElementById('selectionBox').style.opacity = 0;
    setTimeout(()=>{
        document.getElementById('selectionBox').style.display='none';
        document.getElementById('converterBox').style.display='block';
        setTimeout(()=>document.getElementById('converterBox').style.opacity=1,50);

        const inputField = document.getElementById('inputField');
        inputField.value='';
        document.getElementById('output').textContent='Your converted result will appear here...';

        if(type==='textToMorse') inputField.placeholder='Type text here...';
        else inputField.placeholder='Paste Morse code here... Use space between letters and / between words';
    },500);
}

function goBack(){
    document.getElementById('converterBox').style.opacity=0;
    setTimeout(()=>{
        document.getElementById('converterBox').style.display='none';
        document.getElementById('selectionBox').style.display='block';
        setTimeout(()=>document.getElementById('selectionBox').style.opacity=1,50);
    },500);
}

// Normalize Morse input
function normalizeMorse(input){
    return input.replace(/[·•]/g,'.').replace(/[—–−]/g,'-').replace(/\s+/g,' ').trim();
}

// Real-time conversion
document.getElementById('inputField').addEventListener('input',()=>{
    const val = document.getElementById('inputField').value;
    const output = document.getElementById('output');
    if(conversionType==='textToMorse'){
        let morse='';
        for(let ch of val.toUpperCase()){
            morse += (morseCodeMap[ch] ? morseCodeMap[ch] : '?') + ' ';
        }
        output.textContent=morse.trim();
    } else if(conversionType==='morseToText'){
        let morse = normalizeMorse(val);
        const words = morse.split(' / '); // slash = word separator
        let txt='';
        words.forEach((w,i)=>{
            const letters = w.trim().split(' '); // space = letter separator
            letters.forEach(l=>{
                if(l.trim()) txt += reverseMorseMap[l]?reverseMorseMap[l]:'?';
            });
            if(i < words.length-1) txt += ' '; // add space between words
        });
        output.textContent = txt;
    }
});

// Toast function
function showToast(message){
    const toast=document.getElementById('toast');
    toast.textContent=message;
    toast.style.visibility='visible';
    toast.style.top='20px';
    toast.style.opacity='1';
    setTimeout(()=>{
        toast.style.opacity='0';
        toast.style.top='10px';
        setTimeout(()=>{toast.style.visibility='hidden';},500);
    },1500);
}

// Copy output
function copyOutput(){
    const output = document.getElementById('output').textContent.trim();
    if(!output){ showToast('Nothing to copy!'); return; }
    if(navigator.clipboard && navigator.clipboard.writeText){
        navigator.clipboard.writeText(output)
        .then(()=>showToast('Copied!'))
        .catch(()=>fallbackCopy(output));
    } else fallbackCopy(output);
}

function fallbackCopy(text){
    const temp = document.createElement('textarea');
    temp.value = text;
    document.body.appendChild(temp);
    temp.select();
    try { document.execCommand('copy'); showToast('Copied!'); } 
    catch(e){ showToast('Copy failed'); }
    document.body.removeChild(temp);
}
</script>

</body>
</html>
